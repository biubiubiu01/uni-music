(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-play-index"],{"09cf":function(t,n,e){"use strict";var i=e("4ea4");e("c740"),e("4160"),e("caad"),e("e25e"),e("ac1f"),e("2532"),e("466d"),e("1276"),e("159b"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("96cf");var a=i(e("1da1")),r=i(e("5530")),o=i(e("1375")),s=e("26cb"),c={data:function(){return{modelShow:!1,scrollTop:0,currentLyricIndex:0,lyricList:[],rotate:0,likeList:[],lyricShow:!1,timer:null,playDetailInfo:{current:"00:00",duration:"00:00",current_value:0,duration_value:0},CustomBar:this.CustomBar}},components:{playList:o.default},computed:(0,r.default)({},(0,s.mapState)({playInfo:function(t){return t.playInfo},paused:function(t){return t.paused},userInfo:function(t){return t.userInfo}})),onShow:function(){var t=this;this.paused?clearInterval(this.timer):this.initRotate(),this.getLikeData(),this.playDetailInfo=this.$audio.playinfo,this.initLyric(),this.$audio.syncStateOn("page-index-get-state",(function(n){var e=n.playinfo;t.playDetailInfo=(0,r.default)({},e),t.initLyric()}))},methods:{initLyric:function(){var t=this;if(0!=this.lyricList.length){var n=this.playDetailInfo.current;this.currentLyricIndex=this.lyricList.findIndex((function(e,i){return!(e.time<n&&t.lyricList[i+1])||t.lyricList[i+1].time>n})),this.scrollTop=36*this.currentLyricIndex}},getLikeData:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function n(){var e,i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e=t.userInfo.id,i=(new Date).getTime(),n.next=4,t.$api.likeData({uid:e,timestamp:i});case 4:a=n.sent,t.$nextTick((function(){t.likeList=a.ids||[]}));case 6:case"end":return n.stop()}}),n)})))()},likeMusic:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function n(){var e,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e=t.likeList.includes(t.playInfo.id),i=(new Date).getTime(),n.next=4,t.$api.likeMusic({id:t.playInfo.id,timestamp:i,like:!e});case 4:n.sent,t.getLikeData();case 6:case"end":return n.stop()}}),n)})))()},handleChange:function(t){this.$audio.seek(t.target.value)},playMusic:function(){var t=this;this.paused?this.initRotate():clearInterval(this.timer);var n=this.$audio.audiolist,e=n.findIndex((function(n){return n.id==t.playInfo.id}));this.$audio.operate(e),this.$store.commit("SET_PASUED",!this.paused)},initRotate:function(){var t=this;this.timer=setInterval((function(){t.rotate+=9}),1e3)},getLyric:function(t){var n=this;return(0,a.default)(regeneratorRuntime.mark((function t(){var e,i,a,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n.lyricShow=!0,e=[],i=n.playInfo.id,t.next=5,n.$api.getLyric({id:i});case 5:a=t.sent,e=(a.lrc.lyric||"").split("\n"),r=/^\[.*\]/,o=[],e.forEach((function(t){if(t.match(r)){var n=t.match(r)[0].substr(1,8),e=n.substr(0,2),i=n.substr(3,2),a=n.substr(6,2);o.push({time:n,ms:60*parseInt(e)*1e3+1e3*parseInt(i)+10*parseInt(a),content:t.substr(11)})}})),n.lyricList=o;case 11:case"end":return t.stop()}}),t)})))()},handleChangePlay:function(t){this.$store.dispatch("changePlay",t)},backHome:function(){uni.switchTab({url:"/pages/index/index"})}},onHide:function(){this.$audio.syncStateOff("page-index-get-state")},watch:{playInfo:{handler:function(){this.scrollTop=0,this.getLyric(!0)},deep:!0}}};n.default=c},"0eee":function(t,n,e){"use strict";e.r(n);var i=e("09cf"),a=e.n(i);for(var r in i)"default"!==r&&function(t){e.d(n,t,(function(){return i[t]}))}(r);n["default"]=a.a},"1de5":function(t,n,e){"use strict";t.exports=function(t,n){return n||(n={}),t=t&&t.__esModule?t.default:t,"string"!==typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),n.hash&&(t+=n.hash),/["'() \t\n]/.test(t)||n.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},"4b0d":function(t,n,e){t.exports=e.p+"static/img/musicImg.a43c9d11.png"},5746:function(t,n,e){"use strict";var i=e("5a10"),a=e.n(i);a.a},"5a10":function(t,n,e){var i=e("c05a");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=e("4f06").default;a("51986d8b",i,!0,{sourceMap:!1,shadowMode:!1})},"924f":function(t,n,e){"use strict";e.r(n);var i=e("fd0a"),a=e("0eee");for(var r in a)"default"!==r&&function(t){e.d(n,t,(function(){return a[t]}))}(r);e("5746");var o,s=e("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"4273505b",null,!1,i["a"],o);n["default"]=c.exports},c05a:function(t,n,e){var i=e("24fb"),a=e("1de5"),r=e("4b0d");n=i(!1);var o=a(r);n.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.play-container[data-v-4273505b]{position:relative;width:100%;height:100%}.play-container .author[data-v-4273505b]{position:absolute;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);color:hsla(0,0%,100%,.9);font-size:%?28?%}.play-container .mask-container[data-v-4273505b]{overflow:hidden;position:absolute;left:0;top:0;right:0;bottom:0;z-index:0;background-size:cover;background-position:50%}.play-container .mask-container[data-v-4273505b]:after{content:"";position:absolute;width:130%;height:130%;left:0;top:0;z-index:1;-webkit-filter:blur(15px);filter:blur(15px);-webkit-transform:translate(-3rem,-3rem);transform:translate(-3rem,-3rem);background:inherit;background-size:100% 100%}.play-container .mask-container .cover-mask[data-v-4273505b]{position:absolute;top:0;bottom:0;left:0;z-index:3;width:100%;height:100%;background-color:rgba(0,0,0,.8)}.play-container .img-container[data-v-4273505b]{position:absolute;top:35%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:%?450?%;height:%?450?%;background:url('+o+") no-repeat;background-size:100% 100%;border-radius:50%;border:2px solid hsla(0,0%,100%,.3);transition:all 1s linear}.play-container .img-container .authorImg[data-v-4273505b]{border-radius:50%;width:%?315?%;height:%?315?%;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.play-container .lighIcon[data-v-4273505b]{color:#f84e51!important}.play-container .lyric-container[data-v-4273505b]{position:absolute;bottom:calc(10% + 100px)}.play-container .lyric-container .lyric-item[data-v-4273505b]{color:#e1d7f0;height:40px;line-height:40px}.play-container .lyric-container .lyric-item.active[data-v-4273505b]{color:#f84e51}.play-container .lyric-container .noLyric[data-v-4273505b]{position:absolute;top:50%;left:50%;color:#fff;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.play-container .bottom-control[data-v-4273505b]{position:absolute;bottom:10%;left:10px;right:10px}.play-container .bottom-control .progress[data-v-4273505b]{width:100%;display:flex;align-items:center}.play-container .bottom-control .progress .audio-number[data-v-4273505b]{width:%?120?%;font-size:%?24?%;line-height:1;color:#fff;text-align:center}.play-container .bottom-control .progress .audio-slider[data-v-4273505b]{flex:1;margin:0}.play-container .bottom-control .iconList[data-v-4273505b]{justify-content:center;align-items:center;margin-top:%?26?%}.play-container .bottom-control .iconList .iconfont[data-v-4273505b]{color:#fff;font-size:%?48?%}",""]),t.exports=n},fd0a:function(t,n,e){"use strict";var i;e.d(n,"b",(function(){return a})),e.d(n,"c",(function(){return r})),e.d(n,"a",(function(){return i}));var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"play-container"},[e("div",{staticClass:"mask-container",style:{"background-image":"url("+t.playInfo.coverImgUrl+")"}},[e("div",{staticClass:"cover-mask",staticStyle:{opacity:"0.6"}})]),e("cu-custom",{staticStyle:{color:"#fff"},attrs:{isBack:!0}},[e("template",{staticClass:"musicName",attrs:{slot:"content"},slot:"content"},[t._v(t._s(t.playInfo.title))])],2),e("v-uni-view",{staticClass:"author",style:{top:t.CustomBar+"px"}},[t._v(t._s(t.playInfo.singer))]),e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!t.lyricShow,expression:"!lyricShow"}],staticClass:"img-container",style:{transform:"translate(-50%, -50%) rotate("+t.rotate+"deg)"}},[e("v-uni-image",{staticClass:"authorImg",attrs:{src:t.playInfo.coverImgUrl},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.getLyric.apply(void 0,arguments)}}})],1),t.lyricShow?e("v-uni-scroll-view",{staticClass:"lyric-container",style:{top:t.CustomBar+35+"px"},attrs:{"scroll-y":!0,"scroll-top":t.scrollTop},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.lyricShow=!1}}},[t.lyricList.length>0?e("v-uni-view",t._l(t.lyricList,(function(n,i){return e("v-uni-view",{key:i,staticClass:"lyric-item",class:{active:i==t.currentLyricIndex},staticStyle:{"text-align":"center"}},[t._v(t._s(n.content))])})),1):e("p",{staticClass:"noLyric"},[t._v("暂无歌词")])],1):t._e(),e("v-uni-view",{staticClass:"bottom-control"},[e("v-uni-view",{staticClass:"progress"},[e("v-uni-view",{staticClass:"audio-number"},[t._v(t._s(t.playDetailInfo.current))]),e("v-uni-slider",{staticClass:"audio-slider",attrs:{activeColor:"rgb(248, 78, 81)","block-size":"8",value:t.playDetailInfo.current_value,max:t.playDetailInfo.duration_value},on:{change:function(n){arguments[0]=n=t.$handleEvent(n),t.handleChange.apply(void 0,arguments)}}}),e("v-uni-view",{staticClass:"audio-number"},[t._v(t._s(t.playDetailInfo.duration))])],1),e("v-uni-view",{staticClass:"iconList flex"},[e("v-uni-text",{staticClass:"iconfont",class:t.likeList.includes(t.playInfo.id)?"icon-like lighIcon":"icon-unlike",staticStyle:{"margin-right":"65rpx"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.likeMusic()}}}),e("v-uni-text",{staticClass:"iconfont icon-play-left",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.handleChangePlay(-1)}}}),e("v-uni-text",{staticClass:"iconfont",class:t.paused?"icon-pause":"icon-play",staticStyle:{"font-size":"90rpx",margin:"0 35px"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.playMusic.apply(void 0,arguments)}}}),e("v-uni-text",{staticClass:"iconfont icon-play-right",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.handleChangePlay(1)}}}),e("v-uni-text",{staticClass:"iconfont icon-liebiao",staticStyle:{"margin-left":"65rpx","font-size":"56rpx"},on:{click:function(n){n.stopPropagation(),arguments[0]=n=t.$handleEvent(n),t.modelShow=!0}}})],1)],1),e("play-list",{on:{backHome:function(n){arguments[0]=n=t.$handleEvent(n),t.backHome.apply(void 0,arguments)}},model:{value:t.modelShow,callback:function(n){t.modelShow=n},expression:"modelShow"}})],1)},r=[]}}]);